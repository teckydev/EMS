<div class="p-6 bg-white rounded-lg shadow-md">

  <!-- Header + Search -->
  <div class="flex flex-col md:flex-row justify-between items-center mb-6 space-y-4 md:space-y-0 md:space-x-4">
    <h2 class="text-xl font-semibold text-gray-700">{{showTitle}}</h2>

    <!-- Search Box -->
    <div class="w-full md:w-1/3">
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Search...</mat-label>
        <input
          matInput
          [(ngModel)]="searchText"
          (ngModelChange)="applyFilter()"
          placeholder="Search by name or ID"
        />
        <button mat-icon-button matSuffix *ngIf="searchText" (click)="searchText=''; applyFilter()">
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>
    </div>
  </div>

  <!-- Table -->
  <div class="overflow-x-auto rounded-lg border border-gray-200">
    <table mat-table [dataSource]="paginatedData" matSort class="w-full bg-white">

      <!-- Dynamic Columns -->
      <ng-container *ngFor="let column of columns" [matColumnDef]="column.key">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="bg-gray-50 text-left px-4 py-3 font-medium text-gray-600">
          {{ column.label }}
        </th>
        <td mat-cell *matCellDef="let element" class="px-4 py-3 text-gray-700">
          <ng-container [ngSwitch]="column.type">
            <!-- Image Column -->
            <ng-container *ngSwitchCase="'image'">
              <img
                [src]="'http://localhost:5000/' + element[column.key]"
                alt="Photo"
                class="w-10 h-10 rounded-full object-cover"
              />
            </ng-container>

            <!-- Default Text Column -->
            <ng-container *ngSwitchDefault>
              {{ column.render ? column.render(element) : element[column.key] }}
            </ng-container>
          </ng-container>
        </td>
      </ng-container>

      <!-- Actions Column -->
      <ng-container *ngIf="showActions" matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef class="bg-gray-50 px-4 py-3 text-gray-600">Actions</th>
        <td mat-cell *matCellDef="let element" class="px-4 py-3 flex items-center space-x-2"  >
          <button mat-icon-button color="primary" (click)="onView(element)" *ngIf="showView">
            <mat-icon>visibility</mat-icon>
          </button>
          <button mat-icon-button color="primary" (click)="onEdit(element)" *ngIf="showSalary">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="onDelete(element)" *ngIf="showSalary">
            <mat-icon>delete</mat-icon>
          </button>
          <button mat-raised-button color="accent" (click)="onSalary(element)"  *ngIf="showView">
            Salary
          </button>
        </td>
      </ng-container>

      <!-- Render Rows -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>

  <!-- Paginator -->
  <div class="mt-4 flex justify-end">
    <mat-paginator
      [length]="filteredDataSource.length"
      [pageSize]="pageSize"
      [pageSizeOptions]="[5, 10, 20]"
      (page)="onPageChange($event)">
    </mat-paginator>
  </div>
</div>
